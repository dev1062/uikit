import React from "react";
import styled from "styled-components";
import { Link } from "react-router-dom";
import { Profile } from "./types";
import NoProfileAvatar from "../../components/Svg/Icons/NoProfileAvatar";

interface AvatarProps {
  profile: Profile;
}

const StyledAvatar = styled.div`
  margin-left: 8px;
  position: relative;

  img {
    border-radius: 50%;
  }
`;

const Pip = styled.div`
  background-color: ${({ theme }) => theme.colors.failure};
  border-radius: 50%;
  pointer-events: none;
  height: 8px;
  position: absolute;
  right: 0;
  top: 0;
  width: 8px;
`;

const Avatar: React.FC<AvatarProps> = ({ profile }) => {
  const { username = "Salt Bae", image, profileLink, noProfileLink, showPip = false } = profile;
  const link = profile.username ? profileLink : noProfileLink;
  const isExternal = link.startsWith("http");
  const ariaLabel = "Link to profile";
  const icon = image ? (
    <img src={image} alt="profile avatar" height="32px" width="32px" />
  ) : (
    <NoProfileAvatar width="32px" height="32px" />
  );

  if (isExternal) {
    return (
      <StyledAvatar title={username}>
        <a href={link} aria-label={ariaLabel}>
        <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" width="32" height="32" viewBox="0 0 32 32">
<title>owl32x32px</title>
<circle cx="16" cy="16" r="16" opacity="0.15"/>
<g opacity="0.17">
<g>
<path d="M22.75567,8.23624a.3726.3726,0,0,1-.14131-.48822,4.57362,4.57362,0,0,0-.01841-2.76209c-.1247-.42076-.31017-.47176-.622-.17163A10.47134,10.47134,0,0,1,20.533,5.95983a1.78893,1.78893,0,0,1-1.56446.32971,9.77852,9.77852,0,0,0-5.39421-.09435,4.81269,4.81269,0,0,1-3.30813-.22279A10.76546,10.76546,0,0,1,9.0696,5.39115c-.37274-.21557-.54924-.12206-.57388.30457a4.498,4.498,0,0,0,.4585,2.36453.38909.38909,0,0,1-.12265.5696A10.72,10.72,0,0,0,19.92363,26.61567a10.73072,10.73072,0,0,0,2.832-18.37943Zm1.87215,8.39868c.00473.18645-.03378.2563-.24179.25374a4.66,4.66,0,0,0-2.6578,1.67991c-1.00984,1.07425-1.69832,2.01782-2.41156,2.757-.82778.8585-1.67462,1.29256-1.48934,1.33214a5.48371,5.48371,0,0,0,1.96126-.13874c.12879.3257-.3335,1.1633-1.10191,2.1356a5.75586,5.75586,0,0,1-1.9081,1.58183,4.39546,4.39546,0,0,1-2.35706.421,6.61812,6.61812,0,0,1-2.8684-.85022,2.79358,2.79358,0,0,1-.47809-.3802c.27242-.18535,1.7308-1.345.79322-4.40484a7.38009,7.38009,0,0,0-3.67017-4.04285A6.13519,6.13519,0,0,1,10.496,10.24871a3.99309,3.99309,0,0,1,4.60725-.2399,5.46482,5.46482,0,0,1,.939.77149c.33527.34253.38767.3369.71238-.04522A3.52777,3.52777,0,0,1,19.7341,9.31249a4.15364,4.15364,0,0,1,3.04284,1.7494A9.01763,9.01763,0,0,1,24.62782,16.63492Z" fill="#00001e"/>
<path d="M13.89912,10.389a2.61187,2.61187,0,0,0-3.37978,2.02844,2.36371,2.36371,0,0,0,.35548,1.86167,2.56776,2.56776,0,0,0,3.77154.55457c.078-.07822.15777-.15475.23372-.2349A2.53908,2.53908,0,0,0,13.89912,10.389Zm-.84933,2.34971a.36955.36955,0,0,1,.2109-.51661.39427.39427,0,1,1,.30732.72614A.37146.37146,0,0,1,13.04979,12.73874Zm1.97111.44817a1.78138,1.78138,0,0,1-.8516,1.25432,2.27548,2.27548,0,0,0,.49021-1.20675,1.79481,1.79481,0,0,0-1.89821-1.80135l-.00008-.00014v.00015a2.13616,2.13616,0,0,0-1.03872.43753,2.9406,2.9406,0,0,0-.618.87888A1.91255,1.91255,0,0,1,12.828,10.84281a1.94973,1.94973,0,0,1,2.193,2.34409Z" fill="#00001e"/>
<path d="M18.33517,10.43a2.53609,2.53609,0,0,0-1.1695,2.53524,2.80986,2.80986,0,0,0,.30194.94092,2.45179,2.45179,0,0,0,2.27717,1.24974,2.4183,2.4183,0,0,0,2.191-1.386c.02926-.06755.05954-.13468.0876-.20273A2.57106,2.57106,0,0,0,21.3526,10.639,2.501,2.501,0,0,0,18.33517,10.43Zm1.30617,2.02408a.3425.3425,0,0,1,.20154-.47968.35913.35913,0,0,1,.51341.17988.3637.3637,0,0,1-.2101.51649A.35245.35245,0,0,1,19.64134,12.45409Zm1.97219.514h0l0,0v.00008h0a1.82383,1.82383,0,0,1-1.0611,1.32829,2.12225,2.12225,0,0,0,.59585-1.31375,1.79634,1.79634,0,0,0-1.74257-1.78671,1.95572,1.95572,0,0,0-1.57006.84849,1.81624,1.81624,0,0,1,1.63929-1.44845A1.94184,1.94184,0,0,1,21.61353,12.96813Z" fill="#00001e"/>
<path d="M17.29564,13.8655a.99556.99556,0,0,0-1.62865.0686,1.7428,1.7428,0,0,0-.3094,1.09872,2.009,2.009,0,0,0,.10715.45876.95591.95591,0,0,0,.87678.71388.8751.8751,0,0,0,.91752-.58318c.11831-.105-.05048-.319.15563-.3957.17978-.06694.19989-.2227.20394-.39225a1.67351,1.67351,0,0,0-.10674-.61181,1.03555,1.03555,0,0,0-.164-.28992Z" fill="#00001e"/>
</g>
</g>
</svg>
        </a>
        {showPip && <Pip />}
      </StyledAvatar>
    );
  }

  return (
    <StyledAvatar title={username}>
      <Link to={link} aria-label={ariaLabel}>
      <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" width="32" height="32" viewBox="0 0 32 32">
<title>owl32x32px</title>
<circle cx="16" cy="16" r="16" opacity="0.15"/>
<g opacity="0.17">
<g>
<path d="M22.75567,8.23624a.3726.3726,0,0,1-.14131-.48822,4.57362,4.57362,0,0,0-.01841-2.76209c-.1247-.42076-.31017-.47176-.622-.17163A10.47134,10.47134,0,0,1,20.533,5.95983a1.78893,1.78893,0,0,1-1.56446.32971,9.77852,9.77852,0,0,0-5.39421-.09435,4.81269,4.81269,0,0,1-3.30813-.22279A10.76546,10.76546,0,0,1,9.0696,5.39115c-.37274-.21557-.54924-.12206-.57388.30457a4.498,4.498,0,0,0,.4585,2.36453.38909.38909,0,0,1-.12265.5696A10.72,10.72,0,0,0,19.92363,26.61567a10.73072,10.73072,0,0,0,2.832-18.37943Zm1.87215,8.39868c.00473.18645-.03378.2563-.24179.25374a4.66,4.66,0,0,0-2.6578,1.67991c-1.00984,1.07425-1.69832,2.01782-2.41156,2.757-.82778.8585-1.67462,1.29256-1.48934,1.33214a5.48371,5.48371,0,0,0,1.96126-.13874c.12879.3257-.3335,1.1633-1.10191,2.1356a5.75586,5.75586,0,0,1-1.9081,1.58183,4.39546,4.39546,0,0,1-2.35706.421,6.61812,6.61812,0,0,1-2.8684-.85022,2.79358,2.79358,0,0,1-.47809-.3802c.27242-.18535,1.7308-1.345.79322-4.40484a7.38009,7.38009,0,0,0-3.67017-4.04285A6.13519,6.13519,0,0,1,10.496,10.24871a3.99309,3.99309,0,0,1,4.60725-.2399,5.46482,5.46482,0,0,1,.939.77149c.33527.34253.38767.3369.71238-.04522A3.52777,3.52777,0,0,1,19.7341,9.31249a4.15364,4.15364,0,0,1,3.04284,1.7494A9.01763,9.01763,0,0,1,24.62782,16.63492Z" fill="#00001e"/>
<path d="M13.89912,10.389a2.61187,2.61187,0,0,0-3.37978,2.02844,2.36371,2.36371,0,0,0,.35548,1.86167,2.56776,2.56776,0,0,0,3.77154.55457c.078-.07822.15777-.15475.23372-.2349A2.53908,2.53908,0,0,0,13.89912,10.389Zm-.84933,2.34971a.36955.36955,0,0,1,.2109-.51661.39427.39427,0,1,1,.30732.72614A.37146.37146,0,0,1,13.04979,12.73874Zm1.97111.44817a1.78138,1.78138,0,0,1-.8516,1.25432,2.27548,2.27548,0,0,0,.49021-1.20675,1.79481,1.79481,0,0,0-1.89821-1.80135l-.00008-.00014v.00015a2.13616,2.13616,0,0,0-1.03872.43753,2.9406,2.9406,0,0,0-.618.87888A1.91255,1.91255,0,0,1,12.828,10.84281a1.94973,1.94973,0,0,1,2.193,2.34409Z" fill="#00001e"/>
<path d="M18.33517,10.43a2.53609,2.53609,0,0,0-1.1695,2.53524,2.80986,2.80986,0,0,0,.30194.94092,2.45179,2.45179,0,0,0,2.27717,1.24974,2.4183,2.4183,0,0,0,2.191-1.386c.02926-.06755.05954-.13468.0876-.20273A2.57106,2.57106,0,0,0,21.3526,10.639,2.501,2.501,0,0,0,18.33517,10.43Zm1.30617,2.02408a.3425.3425,0,0,1,.20154-.47968.35913.35913,0,0,1,.51341.17988.3637.3637,0,0,1-.2101.51649A.35245.35245,0,0,1,19.64134,12.45409Zm1.97219.514h0l0,0v.00008h0a1.82383,1.82383,0,0,1-1.0611,1.32829,2.12225,2.12225,0,0,0,.59585-1.31375,1.79634,1.79634,0,0,0-1.74257-1.78671,1.95572,1.95572,0,0,0-1.57006.84849,1.81624,1.81624,0,0,1,1.63929-1.44845A1.94184,1.94184,0,0,1,21.61353,12.96813Z" fill="#00001e"/>
<path d="M17.29564,13.8655a.99556.99556,0,0,0-1.62865.0686,1.7428,1.7428,0,0,0-.3094,1.09872,2.009,2.009,0,0,0,.10715.45876.95591.95591,0,0,0,.87678.71388.8751.8751,0,0,0,.91752-.58318c.11831-.105-.05048-.319.15563-.3957.17978-.06694.19989-.2227.20394-.39225a1.67351,1.67351,0,0,0-.10674-.61181,1.03555,1.03555,0,0,0-.164-.28992Z" fill="#00001e"/>
</g>
</g>
</svg>
      </Link>
      {showPip && <Pip />}
    </StyledAvatar>
  );
};

export default Avatar;
